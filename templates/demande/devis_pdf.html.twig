{% block title %}Devis PDF{% endblock %}

{% block body %}
<style>
    body {
        font-family: Arial, sans-serif;
        font-size: 12px;
        color: #333;
        line-height: 1.4;
    }

    .header {
        text-align: center;
        margin-bottom: 20px;
    }

    .header h1 {
        color: #2457e4;
        margin: 0;
    }

    .infos-demandeur {
        margin-bottom: 30px;
    }

    .infos-demandeur p {
        margin: 4px 0;
    }

    .prestations-table {
        width: 100%;
        border-collapse: collapse;
        margin-bottom: 20px;
    }

    .prestations-table th, .prestations-table td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: left;
    }

    .prestations-table th {
        background-color: #2457e4;
        color: #fff;
    }

    .total {
        text-align: right;
        font-weight: bold;
        font-size: 14px;
    }

    .devis-numero {
        text-align: right;
        margin-bottom: 20px;
        font-weight: bold;
    }
</style>

<div class="header">
    <h1>Devis</h1>
</div>

<div class="devis-numero">
    Numéro du devis : {{ devisNumero }}
</div>

<div class="infos-demandeur">
    <p><strong>Nom :</strong> {{ nom ?? 'Non renseigné' }}</p>
    <p><strong>Email :</strong> {{ email ?? 'Non renseigné' }}</p>
    <p><strong>Téléphone :</strong> {{ telephone ?? 'Non renseigné' }}</p>

    <p><strong>Nature du demandeur :</strong> {{ demande.naturedemandeur ?? 'Non renseigné' }}</p>
    <p><strong>Adresse de la prestation :</strong> {{ demande.adresseprestation ?? 'Non renseignée' }}</p>
    <p><strong>Date de début :</strong> 
        {{ demande.dateDebut ? demande.dateDebut|date('d/m/Y') : 'Non renseignée' }}
    </p>
    <p><strong>Date de fin :</strong>
        {{ demande.dateFin ? demande.dateFin|date('d/m/Y') : 'Non renseignée' }}
    </p>
</div>

{% if detailsPrestations is not empty %}

    <table class="prestations-table">
        <thead>
            <tr>
                <th>Prestation</th>
                <th>Prix unitaire (DT)</th>
                <th>Quantité (jours)</th>
                <th>Total (DT)</th>
            </tr>
        </thead>
        <tbody>
            {% for p in detailsPrestations %}
                <tr>
                    <td>{{ p.titre }}</td>
                    <td>{{ p.prix_unitaire }}</td>
                    <td>{{ p.jours }}</td>
                    <td><strong>{{ p.total }}</strong></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <p class="total">Total estimé : {{ total }} DT</p>
    <p>Ce devis a une validité de 30 jours.</p>

{% else %}
    <p>Aucune prestation sélectionnée.</p>
{% endif %}
{% endblock %}
